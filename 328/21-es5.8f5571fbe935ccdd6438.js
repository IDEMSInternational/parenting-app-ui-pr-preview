!function(){function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function e(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{av1H:function(t,o,i){"use strict";i.r(o),i.d(o,"ModulePageModule",function(){return Y});var c,r,s,a,l=i("SVse"),u=i("s7LF"),p=i("sZkV"),f=i("iInd"),m=i("qe0H"),d=i("8Y7J"),g=((a=function(){function t(){n(this,t)}return e(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(n){return new(n||a)},a.\u0275cmp=d.Gb({type:a,selectors:[["module-list-flow-button"]],decls:2,vars:0,template:function(n,t){1&n&&(d.Rb(0,"div"),d.Ac(1,"Button"),d.Qb())},styles:["[_nghost-%COMP%]{--module-steps-margin:20px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:var(--module-steps-margin)}"]}),a),w=((s=function(){function t(){n(this,t)}return e(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(n){return new(n||s)},s.\u0275cmp=d.Gb({type:s,selectors:[["module-list-flow-description"]],inputs:{row:"row",flow:"flow"},decls:2,vars:1,template:function(n,t){1&n&&(d.Rb(0,"p"),d.Ac(1),d.Qb()),2&n&&(d.Ab(1),d.Bc(t.row.text))},styles:["[_nghost-%COMP%]{--module-steps-margin:20px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:var(--module-steps-margin)}"]}),s),b=((r=function(){function t(){n(this,t)}return e(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(n){return new(n||r)},r.\u0275cmp=d.Gb({type:r,selectors:[["module-list-flow-main-image"]],inputs:{row:"row",flow:"flow"},decls:2,vars:1,consts:[[1,"image-spacer"],[3,"src"]],template:function(n,t){1&n&&(d.Rb(0,"div",0),d.Nb(1,"img",1),d.Qb()),2&n&&(d.Ab(1),d.ic("src",t.row.media_asset,d.sc))},styles:["[_nghost-%COMP%]{--module-steps-margin:20px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:var(--module-steps-margin)}","img[_ngcontent-%COMP%] {\n        height: 140px;\n        margin: auto;\n        display: block;\n        position: relative;\n        bottom: -25px;\n      }\n\n      .image-spacer[_ngcontent-%COMP%] {\n        text-align: center;\n        background: var(--ion-color-primary-lighter);\n        margin-top: -25px;\n      }\n\n      @media only screen and (max-width: 360px) {\n        img[_ngcontent-%COMP%] {\n          height: 100px;\n        }\n      }"]}),r),h=((c=function(){function t(){n(this,t)}return e(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(n){return new(n||c)},c.\u0275cmp=d.Gb({type:c,selectors:[["module-list-flow-step-intro"]],inputs:{row:"row",flow:"flow"},decls:2,vars:1,template:function(n,t){1&n&&(d.Rb(0,"p"),d.Ac(1),d.Qb()),2&n&&(d.Ab(1),d.Bc(t.row.text))},styles:["[_nghost-%COMP%]{--module-steps-margin:20px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:var(--module-steps-margin)}"]}),c),v=i("mrSG"),k=i("Evy+");function y(n,t){1&n&&d.Nb(0,"ion-icon",6)}function C(n,t){1&n&&d.Nb(0,"ion-icon",7)}function O(n,t){1&n&&d.Nb(0,"ion-icon",8)}var _,P=((_=function(){function t(e,o){n(this,t),this.taskService=e,this.router=o,this.isLocked=!0,this.isCompleted=!1}return e(t,[{key:"ngOnInit",value:function(){this.row.task_id&&(this.evaluateTaskMeta(this.row.task_id),this._subscribeToRouteChanges())}},{key:"ngOnDestroy",value:function(){this.subscription$&&this.subscription$.unsubscribe()}},{key:"evaluateTaskMeta",value:function(n){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.taskService.evaluateTaskCompleted(n);case 2:return this.isCompleted=t.sent,t.next=5,this.taskService.evaluateTasklocked(n);case 5:this.isLocked=t.sent;case 6:case"end":return t.stop()}},t,this)}))}},{key:"handleItemClicked",value:function(){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.row.task_id,!n.t0){n.next=4;break}return n.next=4,this.taskService.startTask(this.row.task_id);case 4:case"end":return n.stop()}},n,this)}))}},{key:"_subscribeToRouteChanges",value:function(){var n=this,t=this.router.url;this.subscription$=this.router.events.subscribe(function(e){return Object(v.a)(n,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=e instanceof f.c&&e.url===t,!n.t0){n.next=4;break}return n.next=4,this.evaluateTaskMeta(this.row.task_id);case 4:case"end":return n.stop()}},n,this)}))})}}]),t}()).\u0275fac=function(n){return new(n||_)(d.Mb(k.a),d.Mb(f.h))},_.\u0275cmp=d.Gb({type:_,selectors:[["module-list-flow-step-item"]],inputs:{row:"row",flow:"flow"},decls:7,vars:7,consts:[[1,"step-item-container"],[1,"step-item-checkbox"],["name","checkmark-outline",4,"ngIf"],["name","",4,"ngIf"],["name","lock-closed-outline",4,"ngIf"],[1,"step-item-button",3,"click"],["name","checkmark-outline"],["name",""],["name","lock-closed-outline"]],template:function(n,t){1&n&&(d.Rb(0,"div",0),d.Rb(1,"div",1),d.yc(2,y,1,0,"ion-icon",2),d.yc(3,C,1,0,"ion-icon",3),d.yc(4,O,1,0,"ion-icon",4),d.Qb(),d.Rb(5,"div",5),d.Zb("click",function(){return t.handleItemClicked()}),d.Ac(6),d.Qb(),d.Qb()),2&n&&(d.Bb("data-locked",t.isLocked)("data-completed",t.isCompleted),d.Ab(2),d.ic("ngIf",t.isCompleted),d.Ab(1),d.ic("ngIf",!t.isCompleted&&!t.isLocked),d.Ab(1),d.ic("ngIf",!t.isCompleted&&t.isLocked),d.Ab(1),d.Bb("data-locked",t.isLocked),d.Ab(1),d.Cc(" ",t.row.text," "))},directives:[l.l,p.l],styles:["[_nghost-%COMP%]{--module-steps-margin:20px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:var(--module-steps-margin)}",".step-item-container[_ngcontent-%COMP%]{margin:var(--module-steps-margin);display:flex;flex-direction:row;align-items:center}.step-item-checkbox[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:42px;margin-right:20px;display:flex;justify-content:center;align-items:center}.step-item-button[_ngcontent-%COMP%]{flex:1;padding:10px;border-radius:20px}.step-item-button[_ngcontent-%COMP%], .step-item-checkbox[_ngcontent-%COMP%]{color:var(--ion-color-primary);background:#fff;border:1px solid var(--ion-color-primary)}.current-step[_ngcontent-%COMP%]{font-weight:700}.step-item-container[data-completed=true][_ngcontent-%COMP%]   .step-item-button[_ngcontent-%COMP%], .step-item-container[data-completed=true][_ngcontent-%COMP%]   .step-item-checkbox[_ngcontent-%COMP%]{background:var(--ion-color-primary-light)}"]}),_);function M(n,t){if(1&n&&d.Nb(0,"module-list-flow-step-intro",2),2&n){var e=d.cc().$implicit;d.ic("row",e)}}function x(n,t){if(1&n&&d.Nb(0,"module-list-flow-step-item",2),2&n){var e=d.cc().$implicit;d.ic("row",e)}}function R(n,t){if(1&n&&(d.Rb(0,"div"),d.yc(1,M,1,1,"module-list-flow-step-intro",1),d.yc(2,x,1,1,"module-list-flow-step-item",1),d.Qb()),2&n){var e=t.$implicit;d.Ab(1),d.ic("ngIf","step_intro"===e.type),d.Ab(1),d.ic("ngIf","step_item"===e.type)}}function I(n,t){}var F,A,Q,S,L,j={description:w,main_image:b,step_group:(A=function(){function t(){n(this,t)}return e(t,[{key:"ngOnInit",value:function(){}}]),t}(),A.\u0275fac=function(n){return new(n||A)},A.\u0275cmp=d.Gb({type:A,selectors:[["module-list-flow-step-group"]],inputs:{row:"row",flow:"flow"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"row",4,"ngIf"],[3,"row"]],template:function(n,t){1&n&&d.yc(0,R,3,2,"div",0),2&n&&d.ic("ngForOf",t.row.rows)},directives:[l.k,l.l,h,P],styles:["[_nghost-%COMP%]{--module-steps-margin:20px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:var(--module-steps-margin)}"]}),A),step_intro:h,step_item:P,title:(F=function(){function t(){n(this,t)}return e(t,[{key:"ngOnInit",value:function(){}}]),t}(),F.\u0275fac=function(n){return new(n||F)},F.\u0275cmp=d.Gb({type:F,selectors:[["module-list-flow-title"]],inputs:{row:"row",flow:"flow"},decls:2,vars:1,template:function(n,t){1&n&&(d.Rb(0,"h1"),d.Ac(1),d.Qb()),2&n&&(d.Ab(1),d.Bc(t.row.text))},styles:["[_nghost-%COMP%]{--module-steps-margin:20px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:var(--module-steps-margin)}"]}),F),button:g},G=((L=function t(e){n(this,t),this.viewContainerRef=e}).\u0275fac=function(n){return new(n||L)(d.Mb(d.Q))},L.\u0275dir=d.Hb({type:L,selectors:[["","appFlowComponentHost",""]]}),L),N=((S=function(){function t(e){n(this,t),this.componentFactoryResolver=e,this.flowComponents=j}return e(t,[{key:"ngOnInit",value:function(){var n=this.componentFactoryResolver.resolveComponentFactory(this.flowComponents[this.row.type]),t=this.flowComponentHost.viewContainerRef;t.clear();var e=t.createComponent(n);e.instance.row=this.row,e.instance.flow=this.flow}}]),t}()).\u0275fac=function(n){return new(n||S)(d.Mb(d.k))},S.\u0275cmp=d.Gb({type:S,selectors:[["plh-module-page-flow-component"]],viewQuery:function(n,t){var e;1&n&&d.vc(G,!0),2&n&&d.nc(e=d.ac())&&(t.flowComponentHost=e.first)},inputs:{row:"row",flow:"flow"},decls:1,vars:0,consts:[["appFlowComponentHost",""]],template:function(n,t){1&n&&d.yc(0,I,0,0,"ng-template",0)},directives:[G],encapsulation:2}),S),T=((Q=function t(){n(this,t)}).\u0275mod=d.Kb({type:Q}),Q.\u0275inj=d.Jb({factory:function(n){return new(n||Q)},imports:[[l.c,u.b,p.D]]}),Q);function B(n,t){if(1&n&&(d.Pb(0),d.Nb(1,"plh-module-page-flow-component",2),d.Ob()),2&n){var e=t.$implicit,o=d.cc();d.Ab(1),d.ic("row",e)("flow",o.modulePageFlow)}}var E,H=((E=function(){function t(){n(this,t)}return e(t,[{key:"ngOnInit",value:function(){console.log("modulePageRow",this.modulePageFlow)}}]),t}()).\u0275fac=function(n){return new(n||E)},E.\u0275cmp=d.Gb({type:E,selectors:[["plh-module-focus-skin"]],inputs:{modulePageFlow:"modulePageFlow"},decls:2,vars:1,consts:[[1,"main-container"],[4,"ngFor","ngForOf"],[3,"row","flow"]],template:function(n,t){1&n&&(d.Rb(0,"div",0),d.yc(1,B,2,2,"ng-container",1),d.Qb()),2&n&&(d.Ab(1),d.ic("ngForOf",t.modulePageFlow.rows))},directives:[l.k,N],styles:["[_nghost-%COMP%]{display:contents}.main-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;overflow:auto;background-color:#fff}"]}),E);function $(n,t){if(1&n&&d.Nb(0,"plh-module-focus-skin",6),2&n){var e=d.cc(2);d.ic("modulePageFlow",e.modulePageFlow)}}function D(n,t){if(1&n&&(d.Rb(0,"div",7),d.Rb(1,"span",8),d.Ac(2),d.Qb(),d.Rb(3,"span",9),d.Ac(4,"not defined"),d.Qb(),d.Qb()),2&n){var e=d.cc(2);d.Ab(2),d.Bc(e.appSkin)}}function J(n,t){if(1&n&&(d.Rb(0,"div",2),d.Rb(1,"div",3),d.yc(2,$,1,1,"plh-module-focus-skin",4),d.yc(3,D,5,1,"div",5),d.Qb(),d.Qb()),2&n){var e=d.cc();d.Ab(1),d.ic("ngSwitch",e.appSkin),d.Ab(1),d.ic("ngSwitchCase","MODULE_FOCUS_SKIN")}}function K(n,t){}var U,V,Z,q=[{path:":flow_name",component:(U=function(){function t(e){n(this,t),this.route=e,this.dataLoaded=!1,this.appSkin="MODULE_FOCUS_SKIN"}return e(t,[{key:"ngOnInit",value:function(){var n=this.route.snapshot.params.flow_name,t=m.g.find(function(t){return t.flow_name===n});if(!t)throw new Error("Module Page Flow Not Found: ".concat(n));this.modulePageFlow=t,console.log("module page flow",this.modulePageFlow),this.dataLoaded=!0}}]),t}(),U.\u0275fac=function(n){return new(n||U)(d.Mb(f.a))},U.\u0275cmp=d.Gb({type:U,selectors:[["plh-module-page"]],decls:4,vars:2,consts:[["class","flex-column-container",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"flex-column-container"],[1,"flex-column-container",3,"ngSwitch"],[3,"modulePageFlow",4,"ngSwitchCase"],["class","content-error",4,"ngSwitchDefault"],[3,"modulePageFlow"],[1,"content-error"],[1,"content-error-variable"],[1,"content-error-message"]],template:function(n,t){if(1&n&&(d.Rb(0,"ion-content"),d.yc(1,J,4,2,"div",0),d.yc(2,K,0,0,"ng-template",null,1,d.zc),d.Qb()),2&n){var e=d.oc(3);d.Ab(1),d.ic("ngIf",t.dataLoaded)("ngIfElse",e)}},directives:[p.j,l.l,l.n,l.o,l.p,H],styles:[""]}),U)}],z=((Z=function t(){n(this,t)}).\u0275mod=d.Kb({type:Z}),Z.\u0275inj=d.Jb({factory:function(n){return new(n||Z)},imports:[[f.j.forChild(q)],f.j]}),Z),Y=((V=function t(){n(this,t)}).\u0275mod=d.Kb({type:V}),V.\u0275inj=d.Jb({factory:function(n){return new(n||V)},imports:[[l.c,u.b,p.D,z,T]]}),V)}}])}();