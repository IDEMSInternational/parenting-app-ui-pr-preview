!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{yPrK:function(t,i,o){"use strict";o.r(i),o.d(i,"SettingsPageModule",function(){return M});var c=o("SVse"),r=o("s7LF"),a=o("sZkV"),l=o("iInd"),u=o("JLHU"),s=o("Ii2O"),b=o("lti7"),g=o("90ve"),h=o("gcOT"),f=o("Tesu"),v=o("Qpa5"),m=o("qe0H"),S=o("zwQB"),p=o("8Y7J");function y(e,t){if(1&e){var n=p.Sb();p.Rb(0,"ion-toggle",2),p.Zb("ionChange",function(){p.qc(n);var e=p.cc();return e.toggleUserSetting(e.userSetting)}),p.Qb()}if(2&e){var i=p.cc();p.ic("checked","true"===i.userSetting.value)}}function C(e,t){if(1&e&&(p.Rb(0,"ion-select-option",5),p.Ac(1),p.Qb()),2&e){var n=t.$implicit;p.ic("value",n.value),p.Ab(1),p.Cc(" ",n.name," ")}}function w(e,t){if(1&e){var n=p.Sb();p.Rb(0,"ion-select",3),p.Zb("ionChange",function(e){p.qc(n);var t=p.cc();return t.selectSettingOption(t.userSetting,e.detail.value)}),p.yc(1,C,2,2,"ion-select-option",4),p.Qb()}if(2&e){var i=p.cc();p.ic("value",i.userSetting.value),p.Ab(1),p.ic("ngForOf",i.userSetting.options)}}var d,k=((d=function(){function t(){e(this,t),this.onSettingChange=new p.o}return n(t,[{key:"toggleUserSetting",value:function(e){e.value=""+!("true"===e.value),this.onSettingChange.emit(e)}},{key:"selectSettingOption",value:function(e,t){e.value=t,this.onSettingChange.emit(e)}}]),t}()).\u0275fac=function(e){return new(e||d)},d.\u0275cmp=p.Gb({type:d,selectors:[["plh-user-setting"]],inputs:{userSetting:"userSetting"},outputs:{onSettingChange:"onSettingChange"},decls:5,vars:3,consts:[[3,"checked","ionChange",4,"ngIf"],["okText","Select","cancelText","Cancel",3,"value","ionChange",4,"ngIf"],[3,"checked","ionChange"],["okText","Select","cancelText","Cancel",3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(p.Rb(0,"ion-item"),p.Rb(1,"ion-label"),p.Ac(2),p.Qb(),p.yc(3,y,1,1,"ion-toggle",0),p.yc(4,w,2,2,"ion-select",1),p.Qb()),2&e&&(p.Ab(2),p.Bc(t.userSetting.name),p.Ab(1),p.ic("ngIf",!t.userSetting.options&&"boolean"===t.userSetting.type),p.Ab(1),p.ic("ngIf",t.userSetting.options))},directives:[a.m,a.n,c.l,a.B,a.b,a.w,a.J,c.k,a.x],styles:[""]}),d);function A(e,t){if(1&e){var n=p.Sb();p.Rb(0,"plh-user-setting",7),p.Zb("onSettingChange",function(e){return p.qc(n),p.cc().onSettingChange(e)}),p.Qb()}2&e&&p.ic("userSetting",t.$implicit)}function Q(e,t){if(1&e&&(p.Rb(0,"ion-select-option",8),p.Ac(1),p.Qb()),2&e){var n=t.$implicit;p.jc("value",n),p.Ab(1),p.Bc(n)}}function R(e,t){if(1&e&&(p.Rb(0,"ion-select-option",8),p.Ac(1),p.Qb()),2&e){var n=t.$implicit;p.ic("value",n),p.Ab(1),p.Cc(" ",n," ")}}function T(e,t){if(1&e){var n=p.Sb();p.Rb(0,"ion-select",9),p.Zb("ionChange",function(e){return p.qc(n),p.cc().launchFlowByName(e.detail.value)}),p.yc(1,R,2,2,"ion-select-option",2),p.Qb()}if(2&e){var i=p.cc();p.Ab(1),p.ic("ngForOf",i.flowNames)}}function F(e,t){if(1&e&&(p.Rb(0,"ion-select-option",8),p.Ac(1),p.Qb()),2&e){var n=t.$implicit;p.ic("value",n),p.Ab(1),p.Cc(" ",n," ")}}function O(e,t){if(1&e){var n=p.Sb();p.Rb(0,"plh-user-setting",7),p.Zb("onSettingChange",function(e){return p.qc(n),p.cc().onSettingChange(e)}),p.Qb()}2&e&&p.ic("userSetting",t.$implicit)}var N,B,x,U=function(){return["/theme-editor"]},Z=[{path:"",component:(N=function(){function t(n,i,o,c,r,a,l,u){var s=this;e(this,t),this.localStorageService=n,this.router=i,this.themeService=o,this.surveyService=c,this.dbService=r,this.settingsService=a,this.offlineChatService=l,this.tourService=u,this.isNative=h.a.isNative,this.themeNames=[],this.userSettings=[],this.devOnlyUserSettings=[],this.flowNames=[],this.tipFlowNames=m.l.map(function(e){return e.flow_name}),this.themeNames=this.themeService.getThemes().map(function(e){return e.name}),this.currentThemeName=this.themeService.getCurrentTheme().name,this.settingsService.getAllUserSettings().subscribe(function(e){s.userSettings=e.filter(function(e){return h.a.isNative||!e.nativeOnly}).filter(function(e){return!e.devOnly}),s.devOnlyUserSettings=e.filter(function(e){return e.devOnly})}),this.offlineChatService.getFlowNames().then(function(e){s.flowNames=e})}return n(t,[{key:"onSettingChange",value:function(e){this.settingsService.setUserSetting(e.id,e.value)}},{key:"openWelcomeFlow",value:function(){this.localStorageService.setBoolean("weclome_skipped",!1),this.localStorageService.setBoolean("weclome_finished",!1),this.router.navigateByUrl("/chat/Welcome_Intro")}},{key:"selectThemeName",value:function(e){this.currentThemeName=e,this.themeService.setCurrentTheme(e)}},{key:"openWelcomeSurvey",value:function(){this.surveyService.runSurvey("welcome")}},{key:"navigateByUrl",value:function(e){this.router.navigateByUrl(e)}},{key:"resetApp",value:function(){this.localStorageService.clear(),this.dbService.deleteDatabase().then(function(){location.reload()})}},{key:"launchFlowByName",value:function(e){this.router.navigateByUrl("/chat/"+e)}},{key:"launchTipFlowByName",value:function(e){this.router.navigateByUrl("/tips/"+e)}},{key:"startTour",value:function(){this.tourService.startTour()}}]),t}(),N.\u0275fac=function(e){return new(e||N)(p.Mb(s.a),p.Mb(l.h),p.Mb(b.a),p.Mb(g.a),p.Mb(u.a),p.Mb(f.a),p.Mb(v.a),p.Mb(S.a))},N.\u0275cmp=p.Gb({type:N,selectors:[["plh-settings"]],decls:38,vars:8,consts:[[3,"userSetting","onSettingChange",4,"ngFor","ngForOf"],["okText","Okay","cancelText","Dismiss",3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],["okText","Launch Flow","cancelText","Cancel",3,"ionChange",4,"ngIf"],["okText","Open Tip","cancelText","Cancel",3,"ionChange"],[3,"click"],[3,"routerLink"],[3,"userSetting","onSettingChange"],[3,"value"],["okText","Launch Flow","cancelText","Cancel",3,"ionChange"]],template:function(e,t){1&e&&(p.Rb(0,"ion-header"),p.Rb(1,"ion-toolbar"),p.Rb(2,"ion-title"),p.Ac(3,"Settings"),p.Qb(),p.Qb(),p.Qb(),p.Rb(4,"ion-content"),p.yc(5,A,1,1,"plh-user-setting",0),p.Rb(6,"ion-item"),p.Rb(7,"ion-label"),p.Ac(8,"Theme"),p.Qb(),p.Rb(9,"ion-select",1),p.Zb("ionChange",function(e){return t.selectThemeName(e.detail.value)}),p.yc(10,Q,2,2,"ion-select-option",2),p.Qb(),p.Qb(),p.Rb(11,"ion-list-header"),p.Ac(12,"Development Settings"),p.Qb(),p.Rb(13,"ion-item"),p.Rb(14,"ion-label"),p.Ac(15,"Launch Flow"),p.Qb(),p.yc(16,T,2,1,"ion-select",3),p.Qb(),p.Rb(17,"ion-item"),p.Rb(18,"ion-label"),p.Ac(19,"Open Tip"),p.Qb(),p.Rb(20,"ion-select",4),p.Zb("ionChange",function(e){return t.launchTipFlowByName(e.detail.value)}),p.yc(21,F,2,2,"ion-select-option",2),p.Qb(),p.Qb(),p.yc(22,O,1,1,"plh-user-setting",0),p.Rb(23,"ion-item"),p.Rb(24,"ion-button",5),p.Zb("click",function(){return t.navigateByUrl("/chat/example_main")}),p.Ac(25,"Open Testing Flow"),p.Qb(),p.Qb(),p.Rb(26,"ion-item"),p.Rb(27,"ion-button",5),p.Zb("click",function(){return t.openWelcomeSurvey()}),p.Ac(28,"Open Sample Survey"),p.Qb(),p.Qb(),p.Rb(29,"ion-item"),p.Rb(30,"ion-button",5),p.Zb("click",function(){return t.resetApp()}),p.Ac(31,"Reset App"),p.Qb(),p.Qb(),p.Rb(32,"ion-item"),p.Rb(33,"ion-label",6),p.Ac(34,"Theme Editor"),p.Qb(),p.Qb(),p.Rb(35,"ion-item"),p.Rb(36,"ion-button",5),p.Zb("click",function(){return t.startTour()}),p.Ac(37,"Start Tour"),p.Qb(),p.Qb(),p.Qb()),2&e&&(p.Ab(5),p.ic("ngForOf",t.userSettings),p.Ab(4),p.ic("value",t.currentThemeName),p.Ab(1),p.ic("ngForOf",t.themeNames),p.Ab(6),p.ic("ngIf",(null==t.flowNames?null:t.flowNames.length)>0),p.Ab(5),p.ic("ngForOf",t.tipFlowNames),p.Ab(1),p.ic("ngForOf",t.devOnlyUserSettings),p.Ab(11),p.ic("routerLink",p.kc(7,U)))},directives:[a.k,a.C,a.A,a.j,c.k,a.m,a.n,a.w,a.J,a.p,c.l,a.d,a.I,l.i,k,a.x],styles:[""]}),N)}],I=((x=function t(){e(this,t)}).\u0275mod=p.Kb({type:x}),x.\u0275inj=p.Jb({factory:function(e){return new(e||x)},imports:[[l.j.forChild(Z)],l.j]}),x),M=((B=function t(){e(this,t)}).\u0275mod=p.Kb({type:B}),B.\u0275inj=p.Jb({factory:function(e){return new(e||B)},imports:[[c.c,r.b,a.D,I]]}),B)}}])}();