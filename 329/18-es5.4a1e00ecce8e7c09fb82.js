!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"42Ma":function(e,i,a){"use strict";a.d(i,"a",function(){return b});var r=a("mrSG"),o=a("iFvM"),c=a("qe0H"),u=a("JLHU"),s=a("8Y7J"),b=function(){var e=function(){function e(n){t(this,e),this.dbService=n}return n(e,[{key:"getHabitWeeklyCount",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date((new Date).getTime()-6048e5),i=0,a=Object(o.a)(c.d[0].rows,"task_id"),e.next=5,this.dbService.table("task_actions").toArray();case 5:return e.sent.forEach(function(e){var r=new Date(e._created);e._completed&&r>n&&a.hasOwnProperty(e.task_id)&&a[e.task_id].id===t&&i++}),e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)}))}},{key:"setHabitWeeklyAim",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.dbService.table("habits").put({habitId:t,weeklyAim:e},"habitId"));case 1:case"end":return n.stop()}},n,this)}))}},{key:"getHabitWeeklyAim",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dbService.table("habits").where("habitId").equals(t).first();case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",n.weeklyAim);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn("No habit found for id",t,e.t0);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[0,8]])}))}},{key:"getUserHabitActivityIdeas",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dbService.table("habit_activity_ideas").where("flowName").equals(t).toArray();case 3:return e.abrupt("return",e.sent.map(function(t){return t.ideaTitle}));case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(console.log("No habit ideas for flow name ",t,e.t0),[]));case 9:case"end":return e.stop()}},e,this,[[0,6]])}))}},{key:"addUserHabitActivityIdea",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.abrupt("return",this.dbService.table("habit_activity_ideas").add({flowName:t,ideaTitle:e}));case 4:return n.prev=4,n.t0=n.catch(0),n.abrupt("return",void console.log("Error adding habit activity idea for flow name: ",t,n.t0));case 7:case"end":return n.stop()}},n,this,[[0,4]])}))}},{key:"deleteUserHabitActivityIdea",value:function(t,e){try{return this.dbService.table("habit_activity_ideas").where("flowName").equals(t).and(function(t){return t.ideaTitle===e}).delete()}catch(n){console.log("Could not delete habit activity idea with title ".concat(e," for flow name ").concat(t)),console.log(n)}}},{key:"markHabitOccurrence",value:function(t){try{return this.dbService.table("habit_occurrence").add({id:null,created:new Date,habitId:t})}catch(e){console.log("Could not mark habit occurrence")}}},{key:"deleteLastHabitOccurrence",value:function(t){try{return this.dbService.table("habit_occurrence").add({id:null,created:new Date,habitId:t})}catch(e){console.log("Could not mark habit occurrence")}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Vb(u.a))},e.\u0275prov=s.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},RWyK:function(e,i,a){"use strict";a.r(i),a.d(i,"ParentPointsPageModule",function(){return w});var r=a("SVse"),o=a("s7LF"),c=a("sZkV"),u=a("iInd"),s=a("qe0H"),b=a("42Ma"),l=a("8Y7J"),d=function(t){return{"on-add":t}};function f(t,e){if(1&t){var n=l.Sb();l.Rb(0,"div",2),l.Zb("click",function(){l.qc(n);var t=e.$implicit;return l.cc().selectHabit(t)}),l.Rb(1,"div",3),l.Nb(2,"img",4),l.Qb(),l.Rb(3,"div",5),l.Ac(4),l.Qb(),l.Rb(5,"div",6),l.Nb(6,"ion-icon",7),l.Rb(7,"span",8),l.Ac(8),l.Qb(),l.Qb(),l.Qb()}if(2&t){var i=e.$implicit;l.Eb("complete",i._count>0),l.Ab(2),l.ic("src",i.main_image_asset,l.sc),l.Ab(2),l.Bc(i.title),l.Ab(1),l.ic("ngClass",l.lc(6,d,i._animating_on_add)),l.Ab(3),l.Bc(i._count)}}var m,h,p,g=[{path:"",component:(m=function(){function e(n){t(this,e),this.habitService=n,this.habits=s.d[0].rows}return n(e,[{key:"ngOnInit",value:function(){}},{key:"selectHabit",value:function(t){t._count||(t._count=0),t._count++,t._animating_on_add=!0,t._animate_timeout_ref&&clearTimeout(t._animate_timeout_ref),t._animate_timeout_ref=setTimeout(function(){t._animating_on_add=!1},1e3)}}]),e}(),m.\u0275fac=function(t){return new(t||m)(l.Mb(b.a))},m.\u0275cmp=l.Gb({type:m,selectors:[["plh-parent-points"]],decls:5,vars:1,consts:[[1,"habit-cards-container"],["class","habit-card",3,"complete","click",4,"ngFor","ngForOf"],[1,"habit-card",3,"click"],[1,"habit-image-container"],[1,"habit-image",3,"src"],[1,"habit-title"],[1,"habit-star",3,"ngClass"],["name","star",1,"star-icon"],[1,"habit-star-count"]],template:function(t,e){1&t&&(l.Rb(0,"ion-content"),l.Rb(1,"h1"),l.Ac(2,"Parent Points"),l.Qb(),l.Rb(3,"div",0),l.yc(4,f,9,8,"div",1),l.Qb(),l.Qb()),2&t&&(l.Ab(4),l.ic("ngForOf",e.habits))},directives:[c.j,r.k,r.j,c.l],styles:["ion-content[_ngcontent-%COMP%]{--background:#e3f4ff}h1[_ngcontent-%COMP%]{color:var(--ion-color-primary);width:100%;text-align:center}.habit-cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.habit-image-container[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-align:center}.habit-image[_ngcontent-%COMP%]{height:100%}.habit-title[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700;font-size:small;text-align:center}.habit-card[_ngcontent-%COMP%]{position:relative;background-color:var(--ion-item-background,#fff);box-shadow:4px 4px 6px rgba(0,0,0,.5);border-radius:20px;padding:5px 10px;height:110px;width:110px;margin:5px;display:flex;flex-direction:column;justify-content:space-between;transition:background-color .5s ease}.habit-card.complete[_ngcontent-%COMP%]{background:#fff;opacity:1}.habit-history-button[_ngcontent-%COMP%]{margin-top:2em}.habit-star[_ngcontent-%COMP%]{position:absolute;z-index:20;width:35px;height:35px;right:-10px;top:-10px}.habit-star[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{width:100%;height:100%;color:gold}.habit-star[_ngcontent-%COMP%]   .habit-star-count[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;left:0;top:8px;width:100%;height:100%;text-align:center}.on-add[_ngcontent-%COMP%]{-webkit-animation:bounce;animation:bounce;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:1;animation-iteration-count:1}@-webkit-keyframes bounce{0%,20%,53%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-30px,0) scaleY(1.1)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-15px,0) scaleY(1.05)}80%{transition-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0) scaleY(.95)}90%{transform:translate3d(0,-4px,0) scaleY(1.02)}}@keyframes bounce{0%,20%,53%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-30px,0) scaleY(1.1)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-15px,0) scaleY(1.05)}80%{transition-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0) scaleY(.95)}90%{transform:translate3d(0,-4px,0) scaleY(1.02)}}"]}),m)}],v=((p=function e(){t(this,e)}).\u0275mod=l.Kb({type:p}),p.\u0275inj=l.Jb({factory:function(t){return new(t||p)},imports:[[u.j.forChild(g)],u.j]}),p),w=((h=function e(){t(this,e)}).\u0275mod=l.Kb({type:h}),h.\u0275inj=l.Jb({factory:function(t){return new(t||h)},imports:[[r.c,o.b,c.D,v]]}),h)}}])}();