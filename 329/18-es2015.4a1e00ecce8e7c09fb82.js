(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"42Ma":function(t,i,n){"use strict";n.d(i,"a",function(){return s});var e=n("mrSG"),a=n("iFvM"),o=n("qe0H"),c=n("JLHU"),r=n("8Y7J");let s=(()=>{class t{constructor(t){this.dbService=t}getHabitWeeklyCount(t){return Object(e.a)(this,void 0,void 0,function*(){const i=new Date((new Date).getTime()-6048e5);let n=0;const e=Object(a.a)(o.d[0].rows,"task_id");return(yield this.dbService.table("task_actions").toArray()).forEach(a=>{const o=new Date(a._created);a._completed&&o>i&&e.hasOwnProperty(a.task_id)&&e[a.task_id].id===t&&n++}),n})}setHabitWeeklyAim(t,i){return Object(e.a)(this,void 0,void 0,function*(){return this.dbService.table("habits").put({habitId:t,weeklyAim:i},"habitId")})}getHabitWeeklyAim(t){return Object(e.a)(this,void 0,void 0,function*(){try{const i=yield this.dbService.table("habits").where("habitId").equals(t).first();if(i)return i.weeklyAim}catch(i){console.warn("No habit found for id",t,i)}return null})}getUserHabitActivityIdeas(t){return Object(e.a)(this,void 0,void 0,function*(){try{return(yield this.dbService.table("habit_activity_ideas").where("flowName").equals(t).toArray()).map(t=>t.ideaTitle)}catch(i){return console.log("No habit ideas for flow name ",t,i),[]}})}addUserHabitActivityIdea(t,i){return Object(e.a)(this,void 0,void 0,function*(){try{return this.dbService.table("habit_activity_ideas").add({flowName:t,ideaTitle:i})}catch(n){return void console.log("Error adding habit activity idea for flow name: ",t,n)}})}deleteUserHabitActivityIdea(t,i){try{return this.dbService.table("habit_activity_ideas").where("flowName").equals(t).and(t=>t.ideaTitle===i).delete()}catch(n){console.log(`Could not delete habit activity idea with title ${i} for flow name ${t}`),console.log(n)}}markHabitOccurrence(t){try{return this.dbService.table("habit_occurrence").add({id:null,created:new Date,habitId:t})}catch(i){console.log("Could not mark habit occurrence")}}deleteLastHabitOccurrence(t){try{return this.dbService.table("habit_occurrence").add({id:null,created:new Date,habitId:t})}catch(i){console.log("Could not mark habit occurrence")}}}return t.\u0275fac=function(i){return new(i||t)(r.Vb(c.a))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},RWyK:function(t,i,n){"use strict";n.r(i),n.d(i,"ParentPointsPageModule",function(){return h});var e=n("SVse"),a=n("s7LF"),o=n("sZkV"),c=n("iInd"),r=n("qe0H"),s=n("42Ma"),b=n("8Y7J");const d=function(t){return{"on-add":t}};function l(t,i){if(1&t){const t=b.Sb();b.Rb(0,"div",2),b.Zb("click",function(){b.qc(t);const n=i.$implicit;return b.cc().selectHabit(n)}),b.Rb(1,"div",3),b.Nb(2,"img",4),b.Qb(),b.Rb(3,"div",5),b.Ac(4),b.Qb(),b.Rb(5,"div",6),b.Nb(6,"ion-icon",7),b.Rb(7,"span",8),b.Ac(8),b.Qb(),b.Qb(),b.Qb()}if(2&t){const t=i.$implicit;b.Eb("complete",t._count>0),b.Ab(2),b.ic("src",t.main_image_asset,b.sc),b.Ab(2),b.Bc(t.title),b.Ab(1),b.ic("ngClass",b.lc(6,d,t._animating_on_add)),b.Ab(3),b.Bc(t._count)}}const u=[{path:"",component:(()=>{class t{constructor(t){this.habitService=t,this.habits=r.d[0].rows}ngOnInit(){}selectHabit(t){t._count||(t._count=0),t._count++,t._animating_on_add=!0,t._animate_timeout_ref&&clearTimeout(t._animate_timeout_ref),t._animate_timeout_ref=setTimeout(()=>{t._animating_on_add=!1},1e3)}}return t.\u0275fac=function(i){return new(i||t)(b.Mb(s.a))},t.\u0275cmp=b.Gb({type:t,selectors:[["plh-parent-points"]],decls:5,vars:1,consts:[[1,"habit-cards-container"],["class","habit-card",3,"complete","click",4,"ngFor","ngForOf"],[1,"habit-card",3,"click"],[1,"habit-image-container"],[1,"habit-image",3,"src"],[1,"habit-title"],[1,"habit-star",3,"ngClass"],["name","star",1,"star-icon"],[1,"habit-star-count"]],template:function(t,i){1&t&&(b.Rb(0,"ion-content"),b.Rb(1,"h1"),b.Ac(2,"Parent Points"),b.Qb(),b.Rb(3,"div",0),b.yc(4,l,9,8,"div",1),b.Qb(),b.Qb()),2&t&&(b.Ab(4),b.ic("ngForOf",i.habits))},directives:[o.j,e.k,e.j,o.l],styles:["ion-content[_ngcontent-%COMP%]{--background:#e3f4ff}h1[_ngcontent-%COMP%]{color:var(--ion-color-primary);width:100%;text-align:center}.habit-cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.habit-image-container[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-align:center}.habit-image[_ngcontent-%COMP%]{height:100%}.habit-title[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700;font-size:small;text-align:center}.habit-card[_ngcontent-%COMP%]{position:relative;background-color:var(--ion-item-background,#fff);box-shadow:4px 4px 6px rgba(0,0,0,.5);border-radius:20px;padding:5px 10px;height:110px;width:110px;margin:5px;display:flex;flex-direction:column;justify-content:space-between;transition:background-color .5s ease}.habit-card.complete[_ngcontent-%COMP%]{background:#fff;opacity:1}.habit-history-button[_ngcontent-%COMP%]{margin-top:2em}.habit-star[_ngcontent-%COMP%]{position:absolute;z-index:20;width:35px;height:35px;right:-10px;top:-10px}.habit-star[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{width:100%;height:100%;color:gold}.habit-star[_ngcontent-%COMP%]   .habit-star-count[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;left:0;top:8px;width:100%;height:100%;text-align:center}.on-add[_ngcontent-%COMP%]{-webkit-animation:bounce;animation:bounce;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:1;animation-iteration-count:1}@-webkit-keyframes bounce{0%,20%,53%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-30px,0) scaleY(1.1)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-15px,0) scaleY(1.05)}80%{transition-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0) scaleY(.95)}90%{transform:translate3d(0,-4px,0) scaleY(1.02)}}@keyframes bounce{0%,20%,53%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-30px,0) scaleY(1.1)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-15px,0) scaleY(1.05)}80%{transition-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0) scaleY(.95)}90%{transform:translate3d(0,-4px,0) scaleY(1.02)}}"]}),t})()}];let m=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(i){return new(i||t)},imports:[[c.j.forChild(u)],c.j]}),t})(),h=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(i){return new(i||t)},imports:[[e.c,a.b,o.D,m]]}),t})()}}]);